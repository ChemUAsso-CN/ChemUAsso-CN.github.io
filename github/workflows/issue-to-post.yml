            // 验证日期格式
            function isValidDate(dateStr) {
             // 检查格式是否为 YYYY-MM-DD，允许后面有可选的注释
             const regex = /^\d{4}-\d{2}-\d{2}(?:\s*#.*)?$/;
             if (!regex.test(dateStr)) return false;
             
             // 提取日期部分
             const pureDateStr = dateStr.split('#')[0].trim();
             
             // 检查日期是否有效
             const date = new Date(pureDateStr);
             return date instanceof Date && !isNaN(date);
           } 